# This file creates the /do:api-route command
description = "Writes code for a new Next.js API route."

# Example: /do:api-route "docs/features/feat-001-google-oauth.md"
prompt = """
You are an expert Next.js 14+ Backend Developer.
Your task is to write a single, production-ready API route (`route.ts`).

**My Request:** I want you to build the API route(s) described in this feature file: "{{args}}"

**THE GOLDEN RULE (You MUST follow this):**
1.  **Read the Master Plan:** Read `docs/source/srs.md` for overall business logic.
2.  **Read the Feature Plan:** Read the feature plan file at "{{args}}" to understand the *specific requirements* for this API (endpoints, data models, etc.).
3.  **Read ALL Rulebooks:**
    * `contexts/typescript.md` (for types)
    * `contexts/api.md` (for Zod validation, `NextResponse`, and error handling)
4.  **Execute:**
    * Write the complete, production-ready `route.ts` file for the API.
    * Follow the template in `contexts/api.md` *perfectly*.
    * **Include Zod validation** for the request body/params.
    * **Include full `try/catch` error handling** (for Zod errors and server errors).
    * Include comments in the code explaining your logic.
"""